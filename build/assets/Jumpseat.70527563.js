import{r as i,a as e,j as t,F as b,b as N,d as $}from"./app.944e8d8e.js";import{A as C}from"./AppLayout.595fb028.js";import"./FlashMessage.f8f9d883.js";import"./date.helpers.37179c42.js";import"./index.es.bbd55343.js";const L=({user:r,spent:w,balance:d})=>{const[m,c]=i.exports.useState(""),[y,p]=i.exports.useState(""),[u,h]=i.exports.useState(""),[f,a]=i.exports.useState(null),[x,g]=i.exports.useState(null),[n,v]=i.exports.useState(-1),S=async o=>{if(a(null),c(null),p(o.target.value),o.target.value.length>=3){const s=await N.get(`/api/airport/search/${o.target.value}`);if(s.data.airport){c(`${s.data.airport.identifier} - ${s.data.airport.name}`),h(s.data.airport.identifier),a(null);const l=await N.get(`/api/jumpseat/cost/${r.current_airport_id}/${s.data.airport.identifier}`);console.log(l),l.status===200?(v(l.data.cost),g(l.data.distance)):a("Cannot calculate price")}else a("No airport found")}},j=()=>{if(!u){a("Please specify an airport to transfer to");return}if(d<n){a("You do not have sufficient funds to transfer here");return}$.Inertia.post("/jumpseat",{cost:n,icao:u}),c(""),p(""),h(""),v(-1),g(null)};return e("div",{className:"p-4",children:t("div",{className:"flex flex-col lg:flex-row justify-between",children:[t("div",{className:"lg:w-1/2 rounded shadow p-4 mx-2 mt-4 bg-white",children:[t("div",{className:"flex justify-between",children:[t("div",{className:"w-1/2",children:[e("div",{children:"Current Location:"}),t("div",{className:"text-lg",children:[r.location.identifier," - ",r.location.name]})]}),t("div",{className:"md:w-1/2",children:[e("label",{htmlFor:"dep",children:e("span",{className:"text-gray-700",children:"Transfer to (ICAO)"})}),e("input",{id:"dep",type:"text",className:"form-input form",value:y,onChange:S}),f&&e("div",{className:"text-sm text-red-500 mt-1",children:f}),m&&e("div",{className:"text-sm mt-1",children:m})]})]}),t("div",{className:"flex mt-4",children:[x&&t("div",{className:"w-1/2 mx-4 text-center",children:[e("div",{children:"Distance"}),t("div",{children:[x.toLocaleString(navigator.language)," nm"]})]}),n>=0?t("div",{className:"w-1/2 mx-4 text-center",children:[e("div",{children:"Price"}),t("div",{children:["$",n.toLocaleString(navigator.language)]})]}):e(b,{})]}),e("div",{className:"flex justify-end mt-12",children:e("button",{className:"btn btn-primary",onClick:()=>j(),children:"Purchase Ticket"})})]}),e("div",{className:"lg:w-1/4 rounded shadow p-4 mx-2 mt-4 bg-white flex justify-center items-center",children:t("div",{className:"flex flex-col text-center",children:[e("div",{children:"Current Balance"}),t("div",{className:"text-xl mt-2",children:["$",d.toLocaleString(navigator.language)]})]})}),e("div",{className:"lg:w-1/4 rounded shadow p-4 mx-2 mt-4 bg-white flex justify-center items-center",children:t("div",{className:"flex flex-col text-center",children:[e("div",{children:"Spent on Jumpseats"}),t("div",{className:"text-xl mt-2",children:["$",w.toLocaleString(navigator.language)]})]})})]})})};L.layout=r=>e(C,{title:"Jumpseat",children:r,heading:"Jumpseat"});export{L as default};
