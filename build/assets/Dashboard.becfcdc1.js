import{r as o,a,F as p,j as t,L as s}from"./app.944e8d8e.js";import{d,c as h}from"./date.helpers.37179c42.js";import{F as f,H as x,i as v}from"./index.es.bbd55343.js";import{m}from"./maplibre-gl.11b67a0a.js";import{p as w}from"./general.helpers.0a3fe5e5.js";import{A as N}from"./AppLayout.595fb028.js";import{S as c}from"./StatBlock.8f20e18b.js";import"./FlashMessage.f8f9d883.js";const _="pk.eyJ1IjoicnVzc2VsbHd3ZXN0IiwiYSI6ImNrc29vZm5paDEweGIzMnA3MXAzYTFuMDQifQ.7veU-ARmzYClHDFsVQvT5g",M=e=>{const r=o.exports.useRef(null),i=o.exports.useRef(null);return o.exports.useEffect(()=>{i.current||(i.current=new m.Map({container:r.current,style:w(e.mapStyle),center:[145,-5.8],zoom:4,accessToken:_}))}),o.exports.useEffect(()=>{e.locations&&i.current.on("load",function(){e.locations.forEach(n=>{const l=[n.lon,n.lat];console.log(l);const u=new m.Popup({offset:25}).setText(n.identifier+" "+n.name);new m.Marker({color:"#F97316",scale:.5}).setLngLat(l).setPopup(u).addTo(i.current)})})},[e.locations]),a(p,{children:a("div",{ref:r,className:`map-container-${e.size} relative overflow-hidden`})})},y=({lastFlight:e,user:r,locations:i,distance:n})=>(console.log(e),t("div",{className:"relative",children:[a(M,{size:"full",locations:i&&i.length>0?i:[],mapStyle:r.map_style}),t("div",{className:"absolute z-30 bg-white w-1/2 md:w-1/3 h-auto opacity-90 top-4 left-4 p-4 rounded shadow",children:[t("div",{children:[t("div",{className:"text-lg flex flex-col md:flex-row items-start md:items-center justify-between mb-2",children:[t("div",{className:"flex items-center",children:[a(f,{icon:x,className:"mr-2 md-36"})," Last Flight"]}),e&&a("span",{className:"ml-2",children:a(s,{className:"link",href:`/logbook/${e.id}`,children:d(e.submitted_at).format("ddd DD MMM YYYY")})})]}),e&&t(p,{children:[t("div",{children:[t("div",{className:"mt-2",children:[a("div",{className:"text-lg",children:e.dep_airport.name}),a(s,{className:"link",href:`/airports/${e.departure_airport_id}`,children:e.departure_airport_id})]}),t("div",{className:"mt-2",children:[a("div",{className:"text-lg",children:e.arr_airport.name}),a(s,{className:"link",href:`/airports/${e.destination_airport_id}`,children:e.destination_airport_id})]})]}),t("div",{className:"text-sm",children:[d.utc(e.submitted_at).fromNow()," - ",d(e.submitted_at).format("ddd DD MMM YYYY")]}),t("div",{className:"mt-2 text-sm flex items-center",children:[a(f,{icon:v}),e.is_rental?t("span",{children:[e.rental.fleet.type," - ",e.rental.registration]}):t(s,{className:"link ml-2",href:`/aircraft/${e.aircraft.id}`,children:[e.aircraft.fleet.type," - ",e.aircraft.registration]})]})]})]}),t("div",{className:"mt-4 flex flex-col md:flex-row",children:[a(c,{width:"1/4",data:r.flights.toLocaleString(navigator.language),text:"Flights"}),a(c,{width:"1/4",data:r.flights_time>0?h(r.flights_time):0,text:"Hours"}),a(c,{width:"1/4",data:r.points.toLocaleString(navigator.language),text:"Points"}),a(c,{width:"1/4",data:n,text:"Distance (nm)"})]})]})]}));y.layout=e=>a(N,{children:e,title:"Crew Page",heading:"My Crew Page"});export{y as default};
