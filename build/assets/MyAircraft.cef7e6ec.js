import{j as t,a as e,L as l,F as m,d,b as p}from"./app.944e8d8e.js";import{A as f}from"./AppLayout.595fb028.js";import{A as b}from"./AircraftCondition.8b13e728.js";import{F as c,B as u,V as y}from"./index.es.bbd55343.js";import{c as w}from"./date.helpers.37179c42.js";import"./FlashMessage.f8f9d883.js";const N=({aircraft:n,rentals:a,agreements:r})=>{const o=i=>{window.confirm(`Cancelling will relinquish ownership and access to ${i.aircraft.registration} and will incur a penalty of: $${i.monthly_payments}. Do you wish to continue?`)&&d.Inertia.post(`/marketplace/finance/cancel/${i.id}`)},h=async i=>{if(i.is_financed){window.alert(`You cannot sell ${i.registration} as there is still outstanding finance`);return}const s=await p.get(`/api/aircraft/price/${i.id}`);s.status===200&&window.confirm(`Are you sure you want to sell your aircraft ${i.registration} for $${s.data.price}?`)&&d.Inertia.post(`/marketplace/sell/${i.id}`)};return t("div",{className:"p-4 flex space-x-4",children:[t("div",{className:"w-1/2 space-y-4",children:[t("div",{className:"bg-white rounded shadow px-2 overflow-x-auto",children:[t("div",{className:"flex justify-between items-baseline mt-2",children:[e("h1",{children:"My Aircraft"}),e(l,{href:"/marketplace",children:e("button",{className:"btn btn-primary btn-small",children:"Go To Marketplace"})})]}),t("table",{className:"table table-auto table-condensed my-2",children:[e("thead",{children:t("tr",{children:[e("th",{children:"Registration"}),e("th",{children:"Type"}),e("th",{children:"Location"}),e("th",{children:"Home"}),e("th",{children:"Hours"}),e("th",{children:"Condition"}),e("th",{})]})}),e("tbody",{children:n&&n.map(i=>t("tr",{children:[e("td",{children:e(l,{href:`/aircraft/${i.id}`,className:"link",children:i.registration})}),e("td",{children:i.fleet.type}),e("td",{children:i.current_airport_id}),e("td",{children:i.hub_id}),e("td",{children:w(i.flight_time_mins)}),e("td",{children:e(b,{aircraftCondition:i.wear})}),e("td",{children:e("button",{onClick:()=>h(i),className:"btn btn-small btn-secondary",children:"Sell"})})]},i.id))})]})]}),t("div",{className:"bg-white rounded shadow px-2 overflow-x-auto",children:[t("div",{className:"flex justify-between items-baseline mt-2",children:[e("h1",{children:"My Rentals"}),e(l,{href:"/rentals",children:e("button",{className:"btn btn-primary btn-small",children:"Go To Rentals"})})]}),t("table",{className:"table table-auto table-condensed my-2",children:[e("thead",{children:t("tr",{children:[e("th",{children:"Registration"}),e("th",{children:"Type"}),e("th",{children:"Location"}),e("th",{children:"Home"}),e("th",{children:"Rental Cost (hour)"})]})}),e("tbody",{children:a&&a.map(i=>t("tr",{children:[e("td",{children:i.registration}),e("td",{children:i.fleet.type}),e("td",{children:i.current_airport_id}),e("td",{children:i.hub_id}),t("td",{children:["$",i.fleet.rental_cost]})]},i.id))})]})]})]}),t("div",{className:"w-1/2",children:[r.length===0&&e("div",{className:"bg-white rounded shadow p-4 text-center",children:"No Current Finance Agreements"}),r&&r.map(i=>t("div",{className:`p-4 rounded shadow mb-2 ${i.is_paid||!i.is_active?"bg-gray-200 text-gray-500":"bg-white"}`,children:[t("div",{className:"flex justify-between items-center",children:[t("h1",{children:["Agreement #",i.id]}),i.is_paid?e(c,{icon:u,className:"text-green-500"}):i.is_active?e(m,{children:e("button",{onClick:()=>o(i),className:"btn btn-secondary btn-small",children:"Cancel"})}):e(c,{icon:y,className:"text-red-500"})]}),e("h2",{children:i.aircraft.registration}),t("div",{className:"flex justify-between items-center mt-2",children:[t("div",{children:[e("span",{className:"text-lg",children:"Deposit"})," ",e("br",{}),"$",i.deposit]}),t("div",{children:[e("span",{className:"text-lg",children:"Total Finance"})," ",e("br",{}),"$",i.finance_amount]}),t("div",{children:[e("span",{className:"text-lg",children:"Length"})," ",e("br",{}),i.term_remaining," / ",i.term_months," months"]})]}),t("div",{className:"flex justify-between items-center mt-2",children:[t("div",{children:[e("span",{className:"text-lg",children:"Monthly Repayments"})," ",e("br",{}),"$",i.monthly_payments]}),t("div",{children:[e("span",{className:"text-lg",children:"Amount Remaining"})," ",e("br",{}),"$",i.amount_remaining]}),t("div",{children:[e("span",{className:"text-lg",children:"Missed Payments"})," ",e("br",{}),i.missed_payments]})]})]},i.id))]})]})};N.layout=n=>e(f,{children:n,heading:"My Aircraft",title:"My Aircraft"});export{N as default};
